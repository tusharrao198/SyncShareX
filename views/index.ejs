<!DOCTYPE html>
<html>

    <head>
        <meta charset="UTF-8">
        <title>File Sharing App</title>
        <link rel="stylesheet" href="/css/style.css">
    </head>

    <body>
        <h1>File Sharing App</h1>
        <form id="upload-form" action="/upload" method="post" enctype="multipart/form-data">
            <input type="file" name="file">
            <button type="submit">Upload</button>
        </form>
        <ul id="files-list"></ul>

        <script src="/socket.io/socket.io.js"></script>
        <script>
            const socket = io();

            socket.on('files_list', (files) => {
                const filesList = document.getElementById('files-list');
                while (filesList.firstChild) {
                    filesList.removeChild(filesList.firstChild);
                }
                files.forEach(file => {
                    const li = document.createElement('li');
                    li.textContent = file;
                    filesList.appendChild(li);
                });
            });

            const uploadForm = document.getElementById('upload-form');
            uploadForm.addEventListener('submit', (event) => {
                event.preventDefault();
                const formData = new FormData(event.target);
                fetch(event.target.action, {
                    method: 'POST',
                    body: formData
                })
                    .then(response => response.json())
                    .then(data => {
                        console.log(data);
                    })
                    .catch(error => console.error(error));
            });
        </script>
    </body>

</html>